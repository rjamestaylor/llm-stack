[{"id":"88a41081-c9b5-4017-9e9f-b9ff690a41b2","userId":"9c62424d-7489-4bb4-b8b1-2effbb9e736a","tool":{"id":"easy_wikipedia","name":"Easy Wikipedia","meta":{"description":"Makes working with the Wikipedia APIs easy","manifest":{"title":"Easy Wikipedia","author":"Jason Mulligan <jason.mulligan@avoidwork.com>","author_url":"https://github.com/avoidwork","funding_url":"https://github.com/avoidwork/easy-wikipedia","version":"1.0.4"}},"content":"\"\"\"\ntitle: Easy Wikipedia\nauthor: Jason Mulligan <jason.mulligan@avoidwork.com>\nauthor_url: https://github.com/avoidwork\nfunding_url: https://github.com/avoidwork/easy-wikipedia\nversion: 1.0.4\n\"\"\"\n\nimport requests\nimport json\nimport re\nfrom html.parser import HTMLParser\nfrom urllib.parse import quote\n\nBASE_URL = \"https://en.wikipedia.org/api/rest_v1\"\nLANGUAGE = \"en-US\"\n\n\nclass EasyWikipediaHTMLParser(HTMLParser):\n    _tags = [\"h1\", \"h2\", \"h3\", \"h4\", \"p\"]\n    _text = []\n    _stream = []\n    _capture = False\n\n    def handle_starttag(self, tag, _args):\n        if tag in self._tags:\n            self._capture = True\n            self._stream.clear()\n\n    def handle_endtag(self, tag):\n        if tag in self._tags:\n            self._capture = False\n            text = \"\".join(self._stream)\n            text = text.strip().rstrip()\n            text = re.sub(r\"\\[[^\\]]+\\]\", \"\", text)\n            if len(text) > 1:\n                trailing_char = \"\\n\" if tag == \"p\" else \"\"\n                formatted_text = f\"{text}{trailing_char}\"\n                self._text.append(formatted_text)\n            self._stream.clear()\n\n    def handle_data(self, data):\n        if self._capture:\n            invalid = len(data.strip()) > 1 and all(\n                word.startswith(\".\") for word in data.split(\" \")\n            )\n            if not invalid:\n                self._stream.append(data)\n\n    def close(self):\n        text = \"\\n\".join(self._text)\n        self._text.clear()\n        return text\n\n\ndef parse_html(page_html):\n    parser = EasyWikipediaHTMLParser()\n    parser.feed(page_html)\n    return parser.close()\n\n\nclass Tools:\n    def __init__(self) -> None:\n        self.citation = True\n        pass\n\n    def page(self, title: str) -> str:\n        \"\"\"\n        Retrieves a Wikipedia page and parses it.\n        :param title: The title of the page.\n        :return: Text of the page.\n        \"\"\"\n        search_title = title.strip().strip('\"').strip(\"'\")\n        url = f\"{BASE_URL}/page/html/{quote(search_title)}?redirect=false&stash=false\"\n        headers = {\n            \"Accept\": 'text/html; charset=utf-8; profile=\"https://www.mediawiki.org/wiki/Specs/HTML/2.1.0\"',\n            \"Accept-Language\": LANGUAGE,\n        }\n        resp = requests.get(url, headers=headers)\n        data = resp.text\n        if len(data) == 0:\n            return f'Failed to fetch page for \"{search_title}\".'\n        return parse_html(data)\n\n    def search(self, title: str) -> str:\n        \"\"\"\n        Retrieves a Wikipedia page summary.\n        :param title: The title of the page.\n        :return: Summary of the page.\n        \"\"\"\n        search_title = title.strip().strip('\"').strip(\"'\")\n        url = f\"{BASE_URL}/page/summary/{quote(search_title)}?redirect=false\"\n        headers = {\"Accept\": \"application/json\", \"Accept-Language\": LANGUAGE}\n        resp = requests.get(url, headers=headers)\n        data = resp.json()\n        if not isinstance(data, dict):\n            return f'Failed to fetch page summary for \"{search_title}\".'\n        page = {\n            \"title\": data.get(\"title\"),\n            \"description\": data.get(\"description\"),\n            \"url\": data.get(\"content_urls\", {}).get(\"desktop\", {}).get(\"page\"),\n            \"timestamp\": data.get(\"timestamp\"),\n            \"revision\": data.get(\"revision\"),\n        }\n        return json.dumps(page)\n"},"info":{"body":"# Easy Wikipedia\n\nA Wikipedia tool for your LLM.\n\n## Overview\n\n`main.py` provides a Python interface to interact with the Wikipedia API, allowing you to fetch pages and summaries. The main functionality is encapsulated in the `Tools` class.\n\n## Example LLM Prompts\n\nHere are some example prompts you can use with your LLM to interact with Easy Wikipedia:\n\n### Get Wikipedia Page Content (`page`)\n- `Tell me about \"Adobe Inc.\".`\n- `Show me the full Wikipedia page for \"Alan Turing\".`\n- `Fetch the article content for \"Quantum computing\".`\n- `Display the Wikipedia entry for \"Artificial Intelligence\".`\n\n### Get Wikipedia Page Summary (`search`)\n- `Summarize the Wikipedia page for \"Marie Curie\".`\n- `Give me a short summary of \"Python (programming language)\".`\n- `What is the Wikipedia summary for \"Black hole\"?`\n\n## About\n\n- Author: Jason Mulligan <jason.mulligan@avoidwork.com>\n- Wikipedia: https://github.com/avoidwork\n- Funding: https://github.com/avoidwork/easy-wikipedia\n- Version: 1.0.4"},"downloads":46,"upvotes":0,"downvotes":0,"updatedAt":1748191800,"createdAt":1748180229,"user":{"id":"9c62424d-7489-4bb4-b8b1-2effbb9e736a","username":"avoidwork","name":"","createdAt":1747604035,"role":null,"verified":false}}]